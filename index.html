<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Compare audio quality from two different microphones side-by-side">
    <meta name="theme-color" content="#ffffff">
    <title>Mic Comparison Tool</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <main class="container">
        <h1>Microphone Comparison</h1>

        <div id="status" class="status status-info" role="status" aria-live="polite" aria-atomic="true">
            Select your microphones to begin recording
        </div>

        <div id="unsupportedBrowser" class="status status-error hidden" role="alert">
            Your browser doesn't support audio recording. Please use Chrome, Firefox, Safari, or Edge.
        </div>

        <form id="micForm" aria-label="Microphone selection">
            <div class="mic-selector">
                <label for="mic1">First microphone</label>
                <select id="mic1" aria-describedby="mic1-desc" required>
                    <option value="">Select a microphone...</option>
                </select>
                <span id="mic1-desc" class="visually-hidden">Choose the first microphone to record from</span>
            </div>

            <div class="mic-selector">
                <label for="mic2">Second microphone</label>
                <select id="mic2" aria-describedby="mic2-desc" required>
                    <option value="">Select a microphone...</option>
                </select>
                <span id="mic2-desc" class="visually-hidden">Choose the second microphone to record from</span>
            </div>
        </form>

        <div class="controls" role="group" aria-label="Recording controls">
            <button id="recordBtn" class="btn btn-primary" aria-label="Start recording from both microphones" type="button">
                Start Recording
            </button>
            <button id="stopBtn" class="btn btn-secondary hidden" aria-label="Stop recording" type="button">
                Stop Recording
            </button>
        </div>

        <div id="visualizerContainer" class="visualizer-container hidden" aria-label="Audio visualization">
            <canvas id="waveformCanvas" class="waveform-canvas"></canvas>
        </div>

        <section id="playbackSection" class="playback-section hidden" aria-label="Recording playback">
            <h2 class="section-title">Your Recordings</h2>

            <div class="playback-item">
                <div class="playback-header">
                    <h3 id="mic1Label" class="playback-title">Microphone 1</h3>
                    <button class="btn btn-download" data-mic="1" aria-label="Download first microphone recording">
                        <i data-lucide="download"></i>
                    </button>
                </div>
                <audio id="audio1" controls aria-label="First microphone recording"></audio>
            </div>

            <div class="playback-item">
                <div class="playback-header">
                    <h3 id="mic2Label" class="playback-title">Microphone 2</h3>
                    <button class="btn btn-download" data-mic="2" aria-label="Download second microphone recording">
                        <i data-lucide="download"></i>
                    </button>
                </div>
                <audio id="audio2" controls aria-label="Second microphone recording"></audio>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>
</html>
